!function(){"use strict";!function(){const e=e=>e&&decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null;function t(){function t(e){if(!window.courier_notices_modal_notices||!window.courier_notices_modal_notices[e])return;let t=document.createElement("div");t.innerHTML=window.courier_notices_modal_notices[e];let n=t.firstElementChild;if(!n)return;n.style.display="none";let i=document.querySelector('.courier-notices[data-courier-placement="popup-modal"] .courier-modal-overlay');i&&(i.appendChild(n),i.classList.remove("hide"),i.style.display="block",o(n)),window.courier_notices_modal_notices.splice(e,1)}function o(e,t){e.style.display="block",e.style.overflow="hidden";let o=e.scrollHeight;e.style.height="0px",e.style.transition="height 0.3s ease",e.offsetHeight,e.style.height=o+"px",setTimeout(function(){e.style.height="",e.style.overflow="",e.style.transition="",t&&t()},300)}var n;document.addEventListener("courierModalNext",function(){window.courier_notices_modal_notices&&window.courier_notices_modal_notices.length>0&&t(0)}),n=function(){let n=document.querySelectorAll('.courier-notices[data-courier-ajax="true"]');if(0===n.length)return;if(!courier_notices_data.has_notices)return;n.forEach(function(e){e.setAttribute("data-loaded","false")});let i=[];if(n.forEach(function(e){let t=e.getAttribute("data-courier-placement");t&&-1===i.indexOf(t)&&i.push(t)}),0===i.length)return;let c=new IntersectionObserver(function(n){n.some(function(e){return 1===e.intersectionRatio&&"false"===e.target.getAttribute("data-loaded")})&&function(n){if(document.querySelectorAll('.courier-notices[data-loaded="true"]').length>0)return;let i={placements:n,format:"html",post_info:{},user_id:"0"!==courier_notices_data.user_id?courier_notices_data.user_id:""};void 0!==courier_notices_data.post_info&&(i.post_info=courier_notices_data.post_info);let c=e("dismissed_notices");c=JSON.parse(c),c=c||[];let r=new URLSearchParams;for(let e in i)if("post_info"===e)for(let t in i[e])r.append(`post_info[${t}]`,i[e][t]);else"placements"===e?i[e].forEach(function(e){r.append("placements[]",e)}):r.append(e,i[e]);let s={};"0"!==courier_notices_data.user_id&&(s["X-WP-Nonce"]=courier_notices_data.wp_rest_nonce),fetch(courier_notices_data.notices_all_endpoint+"?"+r.toString(),{method:"GET",headers:s}).then(function(e){if(!e.ok)throw new Error("Network response was not ok");return e.json()}).then(function(e){e&&"object"==typeof e&&function(e,n){Object.keys(e).forEach(function(i){let c=e[i],r=document.querySelector('.courier-notices[data-courier-placement="'+i+'"]');r&&("popup-modal"===i?function(e,o){let n=[];Object.keys(e).forEach(function(t){-1===o.indexOf(parseInt(t))&&n.push(e[t])}),n.length>0&&(window.courier_notices_modal_notices=n,setTimeout(function(){t(0)},500))}(c,n):Object.keys(c).forEach(function(e){if(-1!==n.indexOf(parseInt(e)))return;let t=document.createElement("div");t.innerHTML=c[e];let s=t.firstElementChild;s.style.display="none",r.appendChild(s),o(s,function(){const t=new CustomEvent("courierNoticeDisplayed",{detail:{notice_id:e,placement:i}});document.dispatchEvent(t)})}),r.setAttribute("data-loaded","true"))})}(e,c)}).catch(function(e){console.error("Courier Notices: Failed to load notices",e)})}(i)},{threshold:1});n.forEach(function(e){c.observe(e)})},"interactive"===document.readyState||"complete"===document.readyState?n():document.addEventListener("DOMContentLoaded",n)}function o(){function t(t){let o=document.querySelector(".courier-notice[data-courier-notice-id='"+t+"']");o&&(o.style.transition="opacity 0.5s ease",o.style.opacity="0",setTimeout(function(){if(o.style.display="none",window.courier_notices_modal_notices&&0!==window.courier_notices_modal_notices.length){const e=new CustomEvent("courierModalNext",{detail:{notice_id:t}});document.dispatchEvent(e)}else{let e=document.querySelector(".courier-modal-overlay");e&&(e.classList.add("hide"),e.style.display="none")}},500)),function(t){let o=e("dismissed_notices");o=JSON.parse(o),o=o||[],-1===o.indexOf(t)&&o.push(t),((e,t,o,n,i,c)=>{if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))return!1;n||(n="/");let r="";if(o)switch(o.constructor){case Number:r=o===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+o;break;case String:r="; expires="+o;break;case Date:r="; expires="+o.toUTCString()}document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+r+(i?"; domain="+i:"")+(n?"; path="+n:"")+(c?"; secure":"")})("dismissed_notices",JSON.stringify(o))}(t)}document.body.addEventListener("click",function(e){let o=e.target;(o.classList.contains("courier-close")||o.classList.contains("trigger-close")||o.closest(".courier-close")||o.closest(".trigger-close"))&&function(e){let o=e.target.classList.contains("courier-close")||e.target.classList.contains("trigger-close")?e.target:e.target.closest(".courier-close")||e.target.closest(".trigger-close");if(!o)return;let n=o.getAttribute("href");if("true"!==o.dataset.dismiss){e.preventDefault(),e.stopPropagation(),o.dataset.dismiss="true";let i=o.closest(".courier-notice"),c=i?parseInt(i.dataset.courierNoticeId,10):NaN;if(!i||isNaN(c))return;courier_notices_data.user_id&&courier_notices_data.user_id>0?fetch(courier_notices_data.notice_endpoint+c+"/dismiss",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","X-WP-Nonce":courier_notices_data.wp_rest_nonce},body:new URLSearchParams({dismiss_nonce:courier_notices_data.dismiss_nonce,user_id:courier_notices_data.user_id})}).then(function(e){e.ok&&(t(c),n&&"#"!==n&&(window.location=n))}).catch(function(e){console.error("Error dismissing notice:",e)}):(t(c),n&&"#"!==n&&(window.location=n))}}(e)})}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){t(),o()}):(t(),o())}()}();