!function(){"use strict";var e={n:function(o){var t=o&&o.__esModule?function(){return o.default}:function(){return o};return e.d(t,{a:t}),t},d:function(o,t){for(var n in t)e.o(t,n)&&!e.o(o,n)&&Object.defineProperty(o,n,{enumerable:!0,get:t[n]})},o:function(e,o){return Object.prototype.hasOwnProperty.call(e,o)}},o=jQuery,t=e.n(o),n=function(e){return e&&decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},i=t(),r=t(),a=r(window),c={contentType:"application/json",placement:"popup-modal",format:"html",post_info:{}},s=function(){var e=document.querySelector('.courier-notices.courier-location-popup-modal[data-courier-ajax="true"]'),o=[];if(e){void 0!==courier_notices_data.post_info&&(c.post_info=courier_notices_data.post_info);var t=n("dismissed_notices");t=(t=JSON.parse(t))||[],r.ajax({method:"GET",beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",courier_notices_data.wp_rest_nonce)},url:courier_notices_data.notices_endpoint,data:c}).done((function(e){if(e.notices){for(var n in e.notices)-1===t.indexOf(parseInt(n))&&o.push(e.notices[n]);o.length>0&&(window.courier_notices_modal_notices=o,d(0))}}))}};function d(e){var o=r(window.courier_notices_modal_notices[e]);o.hide(),o.length<1||(r('.courier-notices[data-courier-placement="'+c.placement+'"] .courier-modal-overlay').append(o),r(".courier-modal-overlay").removeClass("hide").show(),o.slideDown("fast"),window.courier_notices_modal_notices.splice(e,1))}var u=t();function p(){function e(e){u(".courier_notice[data-courier-notice-id='"+e+"']").fadeOut(500,(function(){0===window.courier_notices_modal_notices.length?u(".courier-modal-overlay").addClass("hide").hide():d(0)})),function(e){var o=n("dismissed_notices");-1===(o=(o=JSON.parse(o))||[]).indexOf(e)&&o.push(e),function(e,o,t,n,i,r){if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))return!1;n||(n="/");var a="";if(t)switch(t.constructor){case Number:a=t===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+t;break;case String:a="; expires="+t;break;case Date:a="; expires="+t.toUTCString()}document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(o)+a+(i?"; domain="+i:"")+(n?"; path="+n:"")+(r?"; secure":"")}("dismissed_notices",JSON.stringify(o))}(e)}u("body").on("click",".courier-close, .trigger-close",(function(o){var t=u(this),n=t.attr("href");if(!0!==t.data("dismiss")){o.preventDefault(),o.stopPropagation(),t.data("dismiss",!0);var i=t.parents(".courier-notice"),r=parseInt(i.data("courier-notice-id"),10);if(0===i.length||isNaN(r))return;courier_notices_data.user_id&&courier_notices_data.user_id>0?(u.post({url:courier_notices_data.notice_endpoint+r+"/dismiss",data:{dismiss_nonce:courier_notices_data.dismiss_nonce,user_id:courier_notices_data.user_id},beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",courier_notices_data.wp_rest_nonce)}}).done((function(){e(r)})),n&&"#"!==n&&u(document).ajaxComplete((function(e,o,t){window.location=n}))):(e(r),n&&"#"!==n&&(window.location=n))}}))}t()((function(){var e;e=function(){var e=i('.courier-notices[data-courier-ajax="true"]');if(e.attr("data-loaded",!1),0!==e.length){var o=document.querySelectorAll('.courier-notices:not(.courier-location-popup-modal)[data-courier-ajax="true"]'),t=new IntersectionObserver((function(e,o){e.forEach((function(e){if(1===e.intersectionRatio&&"false"===e.target.getAttribute("data-loaded")){var o={contentType:"application/json",placement:e.target.getAttribute("data-courier-placement"),format:"html",post_info:{}};void 0!==courier_notices_data.post_info&&(o.post_info=courier_notices_data.post_info);var t=n("dismissed_notices");t=(t=JSON.parse(t))||[],i.ajax({method:"GET",beforeSend:function(e){"0"!==courier_notices_data.user_id&&e.setRequestHeader("X-WP-Nonce",courier_notices_data.wp_rest_nonce)},url:courier_notices_data.notices_endpoint,data:o}).success((function(e){e.notices&&i.each(e.notices,(function(n){if(-1===t.indexOf(parseInt(n))){var r=i(e.notices[n]).hide();i('.courier-notices[data-courier-placement="'+o.placement+'"]').append(r),r.slideDown("fast","swing",(function(){var e=new CustomEvent("courierNoticeDisplayed",{detail:n});document.dispatchEvent(e)}))}}))})),e.target.setAttribute("data-loaded",!0)}}))}),{threshold:1});Array.prototype.forEach.call(o,(function(e){t.observe(e)}))}},"interactive"===document.readyState||"complete"===document.readyState?e():document.addEventListener("DOMContentLoaded",e),p(),a.on("load",s)}))}();